---
layout: page
title: Posts
background: '/img/bg-post.jpg'
---

<style>
  /* (기존 스타일 유지) */
  .posts-full-width {
    width: 100vw;
    position: relative;
    left: 50%;
    right: 50%;
    margin-left: -50vw;
    margin-right: -50vw;
    display: flex;
    justify-content: flex-start;
    background: white;
  }

  .posts-inner-flex {
    display: flex;
    width: 100%;
    max-width: 1600px;
    padding-left: 20px;
  }

  .sidebar-column {
    flex: 0 0 260px;
    padding-top: 30px;
  }

  .sidebar-wrapper {
    position: sticky;
    top: 100px;
    z-index: 10;
  }

  .post-list-column {
    flex: 1;
    padding: 30px 50px;
    border-left: 1px solid #eee;
  }

  .list-group-item {
    padding: 12px 15px;
    font-size: 0.95rem;
    border: 1px solid #e9ecef !important;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .list-group-item.active {
    background-color: #0085a1 !important;
    border-color: #0085a1 !important;
    color: white !important;
    font-weight: bold;
  }

  #cs-sub-menu, #retro-sub-menu {
    display: none; /* 기본적으로 닫혀 있도록 설정 */
    background-color: #f8f9fa;
  }

  .sub-category {
    padding-left: 35px !important;
    font-size: 0.85rem !important;
    border-top: none !important;
  }

  .arrow {
    display: inline-block;
    transition: transform 0.3s ease;
    font-size: 0.7rem;
    color: #adb5bd;
  }
  
  .active .arrow {
    color: white;
  }

  .arrow.rotate {
    transform: rotate(90deg);
  }

  @media (max-width: 991px) {
    .posts-full-width { left: 0; right: 0; margin: 0; width: 100%; }
    .posts-inner-flex { flex-direction: column; padding: 15px; }
    .sidebar-column { flex: 0 0 auto; width: 100%; }
    .post-list-column { padding: 20px 0; border-left: none; }
  }
</style>

<div class="posts-full-width">
  <div class="posts-inner-flex">
    <div class="sidebar-column">
      <div class="sidebar-wrapper shadow-sm">
        <div class="list-group" id="category-list">
          <div class="list-group-item list-group-item-dark" style="font-weight: bold; background: #343a40; color: white; border: none !important; cursor: default;">Categories</div>
          
          <a href="javascript:void(0)" class="list-group-item list-group-item-action" id="cat-Computer-Science" onclick="toggleSubMenu('cs-sub-menu', 'Computer-Science', this)">
            Computer Science
            <span class="arrow" id="cs-arrow">▶</span>
          </a>
          <div id="cs-sub-menu">
            <a href="javascript:void(0)" class="list-group-item list-group-item-action sub-category" id="cat-Data-Structure" onclick="filterCategory('Data-Structure', this)">Data Structure</a>
            <a href="javascript:void(0)" class="list-group-item list-group-item-action sub-category" id="cat-Operating-System" onclick="filterCategory('Operating-System', this)">Operating System</a>
            <a href="javascript:void(0)" class="list-group-item list-group-item-action sub-category" id="cat-Database" onclick="filterCategory('Database', this)">Database</a>
            <a href="javascript:void(0)" class="list-group-item list-group-item-action sub-category" id="cat-Network" onclick="filterCategory('Network', this)">Network</a>
          </div>

          <a href="javascript:void(0)" class="list-group-item list-group-item-action" id="cat-Dev-Languages" onclick="filterCategory('Dev-Languages', this)">Dev Languages</a>
          <a href="javascript:void(0)" class="list-group-item list-group-item-action" id="cat-Infra-&-DevOps" onclick="filterCategory('Infra-&-DevOps', this)">Infra & DevOps</a>
          <a href="javascript:void(0)" class="list-group-item list-group-item-action" id="cat-Projects" onclick="filterCategory('Projects', this)">Projects</a>
          
          <a href="javascript:void(0)" class="list-group-item list-group-item-action" id="cat-Retrospective" onclick="toggleSubMenu('retro-sub-menu', 'Retrospective', this)">
            Retrospective
            <span class="arrow" id="retro-arrow">▶</span>
          </a>
          <div id="retro-sub-menu">
            <a href="javascript:void(0)" class="list-group-item list-group-item-action sub-category" id="cat-Certifications" onclick="filterCategory('Certifications', this)">Certifications</a>
          </div>
        </div>
      </div>
    </div>

    <div class="post-list-column">
      <div id="post-wrapper">
        {% for post in site.posts %}
        {% assign cat_slugs = "" %}
        {% for cat in post.categories %}
          {% assign slug = cat | replace: " ", "-" %}
          {% assign cat_slugs = cat_slugs | append: " " | append: slug %}
        {% endfor %}
        <article class="post-preview {{ cat_slugs }}">
          <a href="{{ post.url | relative_url }}">
            <h2 class="post-title" style="margin-top: 0; font-size: 1.8rem;">{{ post.title }}</h2>
            <h3 class="post-subtitle" style="font-size: 1.15rem; color: #666; font-weight: 300;">
              {% if post.subtitle %}{{ post.subtitle }}{% else %}{{ post.excerpt | strip_html | truncatewords: 15 }}{% endif %}
            </h3>
          </a>
          <p class="post-meta" style="font-size: 0.85rem; color: #adb5bd;">
            {{ post.date | date: '%B %d, %Y' }}
          </p>
          <hr>
        </article>
        {% endfor %}
      </div>
    </div>
  </div>
</div>

<script>
  function toggleSubMenu(menuId, category, element) {
    const subMenu = document.getElementById(menuId);
    const arrow = element.querySelector('.arrow');
    
    if (subMenu.style.display === 'block') {
      subMenu.style.display = 'none';
      if(arrow) arrow.classList.remove('rotate');
    } else {
      subMenu.style.display = 'block';
      if(arrow) arrow.classList.add('rotate');
    }
    filterCategory(category, element);
  }

  function filterCategory(category, element) {
    const items = document.querySelectorAll('.list-group-item-action');
    items.forEach(item => item.classList.remove('active'));
    if(element) element.classList.add('active');

    const posts = document.querySelectorAll('.post-preview');
    posts.forEach(post => {
      const formattedCat = category.replace(/ /g, '-');
      if (category === 'Computer-Science') {
        const csCats = ['Computer-Science', 'Data-Structure', 'Operating-System', 'Database', 'Network'];
        const hasCS = csCats.some(cat => post.classList.contains(cat));
        post.style.display = hasCS ? 'block' : 'none';
      } 
      else if (category === 'Retrospective') {
        const retroCats = ['Retrospective', 'Certifications'];
        const hasRetro = retroCats.some(cat => post.classList.contains(cat));
        post.style.display = hasRetro ? 'block' : 'none';
      }
      else if (post.classList.contains(formattedCat)) {
        post.style.display = 'block';
      } else {
        post.style.display = 'none';
      }
    });
  }

  window.onload = function() {
    const urlParams = new URLSearchParams(window.location.search);
    const categoryParam = urlParams.get('category');
    
    const csMenu = document.getElementById('cs-sub-menu');
    const csArrow = document.getElementById('cs-arrow');
    const retroMenu = document.getElementById('retro-sub-menu');
    const retroArrow = document.getElementById('retro-arrow');

    // 1. URL 파라미터가 있는 경우 (해당 카테고리만 펼침)
    if (categoryParam) {
      const targetId = 'cat-' + categoryParam;
      const targetElement = document.getElementById(targetId);

      if (targetElement) {
        const csSubCats = ['Data-Structure', 'Operating-System', 'Database', 'Network', 'Computer-Science'];
        if (csSubCats.includes(categoryParam)) {
          csMenu.style.display = 'block';
          csArrow.classList.add('rotate');
        }
        
        const retroSubCats = ['Certifications', 'Retrospective'];
        if (retroSubCats.includes(categoryParam)) {
          retroMenu.style.display = 'block';
          retroArrow.classList.add('rotate');
        }
        
        filterCategory(categoryParam, targetElement);
        return;
      }
    }

    // 2. 파라미터가 없는 경우 (모두 닫힌 상태로 초기화)
    // 기본적으로 스타일에서 display: none 처리가 되어 있으므로 추가 로직 없이 필터만 실행
    const defaultCat = document.getElementById('cat-Computer-Science');
    filterCategory('Computer-Science', defaultCat);
  };
</script>